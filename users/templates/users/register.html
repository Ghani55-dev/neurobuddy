<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register | NeuroPulse</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      /* Light Theme Colors */
      --primary-light: #6a11cb;
      --secondary-light: #2575fc;
      --text-light: #2c3e50;
      --bg-light: #f8f9fa;
      --card-light: #ffffff;
      --border-light: rgba(0, 0, 0, 0.1);
      --input-focus-light: rgba(106, 17, 203, 0.25);
      
      /* Dark Theme Colors */
      --primary-dark: #8a2be2;
      --secondary-dark: #00d4ff;
      --text-dark: #f8f9fa;
      --bg-dark: #121212;
      --card-dark: #1e1e1e;
      --border-dark: #444;
      --input-focus-dark: rgba(138, 43, 226, 0.25);
      
      --transition-speed: 0.3s;
    }

    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      min-height: 100vh;
      background-color: var(--bg-light);
      color: var(--text-light);
      transition: all var(--transition-speed) ease;
      line-height: 1.6;
      margin: 0;
      padding: 0;
    }

    /* Dark Theme */
    body.dark-theme {
      background-color: var(--bg-dark);
      color: var(--text-dark);
    }

    /* Auth Container */
    .auth-container {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 2rem;
      background: linear-gradient(135deg, var(--primary-light), var(--secondary-light));
    }

    .dark-theme .auth-container {
      background: linear-gradient(135deg, var(--primary-dark), var(--secondary-dark));
    }

    /* Auth Card */
    .auth-card {
      width: 100%;
      max-width: 500px;
      padding: 2.5rem;
      background-color: var(--card-light);
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
      transition: all var(--transition-speed) ease;
    }

    .dark-theme .auth-card {
      background-color: var(--card-dark);
    }

    /* Typography */
    .auth-card h2 {
      color: var(--primary-light);
      font-weight: 600;
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .dark-theme .auth-card h2 {
      color: var(--primary-dark);
    }

    /* Form Elements */
    .form-group {
      margin-bottom: 1.5rem;
      position: relative;
    }

    .form-group label {
      font-weight: 500;
      color: var(--text-light);
      margin-bottom: 0.5rem;
      display: block;
      transition: all 0.2s ease;
      transform-origin: left top;
    }

    .form-group.focused label {
      color: var(--primary-light);
      transform: translateY(-5px) scale(0.9);
    }

    .dark-theme .form-group label {
      color: var(--text-dark);
    }

    .dark-theme .form-group.focused label {
      color: var(--primary-dark);
    }

    .form-control {
      transition: all var(--transition-speed) ease;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      border: 1px solid var(--border-light);
      background-color: var(--card-light);
      color: var(--text-light);
      width: 100%;
      font-size: 1rem;
    }

    .dark-theme .form-control {
      border-color: var(--border-dark);
      background-color: var(--card-dark);
      color: var(--text-dark);
    }

    .form-control:focus {
      border-color: var(--primary-light);
      box-shadow: 0 0 0 0.25rem var(--input-focus-light);
      outline: none;
    }

    .dark-theme .form-control:focus {
      border-color: var(--primary-dark);
      box-shadow: 0 0 0 0.25rem var(--input-focus-dark);
    }

    /* Password Input Wrapper */
    .password-wrapper {
      position: relative;
    }

    .password-toggle {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: var(--text-light);
      cursor: pointer;
      padding: 0.5rem;
      transition: color var(--transition-speed) ease;
    }

    .password-toggle:hover {
      color: var(--primary-light);
    }

    .dark-theme .password-toggle {
      color: var(--text-dark);
    }

    .dark-theme .password-toggle:hover {
      color: var(--primary-dark);
    }

    /* Floating Labels Effect */
    .floating-label-group {
      position: relative;
      margin-bottom: 1.5rem;
    }

    .floating-label {
      position: absolute;
      pointer-events: none;
      left: 1rem;
      top: 0.75rem;
      transition: all var(--transition-speed) ease;
      background-color: var(--card-light);
      padding: 0 0.25rem;
      color: var(--text-light);
      opacity: 0.7;
    }

    .dark-theme .floating-label {
      background-color: var(--card-dark);
      color: var(--text-dark);
    }

    .form-control:focus ~ .floating-label,
    .form-control:not(:placeholder-shown) ~ .floating-label {
      top: -0.5rem;
      left: 0.8rem;
      font-size: 0.8rem;
      opacity: 1;
      color: var(--primary-light);
      background-color: var(--card-light);
    }

    .dark-theme .form-control:focus ~ .floating-label,
    .dark-theme .form-control:not(:placeholder-shown) ~ .floating-label {
      color: var(--primary-dark);
      background-color: var(--card-dark);
    }

    /* Buttons */
    .btn-primary {
      background-color: var(--primary-light);
      color: white;
      border: none;
      font-weight: 600;
      padding: 0.75rem;
      border-radius: 8px;
      transition: all var(--transition-speed) ease;
      width: 100%;
      margin-top: 1rem;
    }

    .dark-theme .btn-primary {
      background-color: var(--primary-dark);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      opacity: 0.9;
    }

    /* Links */
    .auth-link {
      text-align: center;
      margin-top: 1.5rem;
      color: var(--text-light);
    }

    .dark-theme .auth-link {
      color: var(--text-dark);
    }

    .auth-link a {
      color: var(--primary-light);
      text-decoration: none;
      transition: all var(--transition-speed) ease;
    }

    .dark-theme .auth-link a {
      color: var(--primary-dark);
    }

    .auth-link a:hover {
      text-decoration: underline;
      opacity: 0.8;
    }

    /* Error Messages */
    .errorlist {
      color: #dc3545;
      padding-left: 1rem;
      margin-top: 0.5rem;
      font-size: 0.875rem;
    }

    /* Theme Toggle */
    .theme-toggle {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(0, 0, 0, 0.1);
      border: none;
      color: var(--text-light);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all var(--transition-speed) ease;
      z-index: 1000;
    }

    .dark-theme .theme-toggle {
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-dark);
    }

    .theme-toggle:hover {
      background: rgba(0, 0, 0, 0.2);
    }

    .dark-theme .theme-toggle:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    /* Input with icon */
    .input-with-icon {
      position: relative;
    }

    .input-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-light);
      opacity: 0.7;
    }

    .dark-theme .input-icon {
      color: var(--text-dark);
    }

    .input-with-icon .form-control {
      padding-left: 2.5rem;
    }

    /* Animated underline effect */
    .underline-animation {
      position: relative;
    }

    .underline-animation:after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: 0;
      left: 0;
      background-color: var(--primary-light);
      transition: width var(--transition-speed) ease;
    }

    .dark-theme .underline-animation:after {
      background-color: var(--primary-dark);
    }

    .underline-animation.focused:after {
      width: 100%;
    }
  </style>
</head>
<body class="dark-theme">
  <button class="theme-toggle" id="theme-toggle">
    <i class="fas fa-sun" id="theme-icon"></i>
  </button>

  <div class="auth-container">
    <div class="auth-card">
      <h2>Create Your Account</h2>
      
     <form method="POST">
  {% csrf_token %}
  
  {% if form.errors %}
    <div class="alert alert-danger">
      Please correct the errors below.
    </div>
  {% endif %}
  
  <!-- Username Field -->
  <div class="form-group floating-label-group underline-animation">
    <div class="input-with-icon">
      <i class="fas fa-user input-icon"></i>
      <input type="text" name="username" class="form-control" id="id_username" required placeholder=" ">
      <label class="floating-label" for="id_username">Username</label>
    </div>
    <small class="form-text text-muted">Required. 150 characters or fewer. Letters, digits and @/+/-/_ only.</small>
  </div>

  <!-- Password Field -->
  <div class="form-group floating-label-group underline-animation">
    <div class="password-wrapper">
      <input type="password" name="password1" class="form-control" id="id_password1" required placeholder=" ">
      <label class="floating-label" for="id_password1">Password</label>
      <button type="button" class="password-toggle" onclick="togglePassword(this)">
        <i class="fas fa-eye"></i>
      </button>
    </div>
    <div class="help-text">
      <ul class="text-muted" style="font-size: 0.8rem; padding-left: 1.2rem;">
        <li>Your password can't be too similar to your other personal information.</li>
        <li>Your password must contain at least 8 characters.</li>
        <li>Your password can't be a commonly used password.</li>
        <li>Your password can't be entirely numeric.</li>
      </ul>
    </div>
  </div>

  <!-- Password Confirmation Field -->
  <div class="form-group floating-label-group underline-animation">
    <div class="password-wrapper">
      <input type="password" name="password2" class="form-control" id="id_password2" required placeholder=" ">
      <label class="floating-label" for="id_password2">Password confirmation</label>
      <button type="button" class="password-toggle" onclick="togglePassword(this)">
        <i class="fas fa-eye"></i>
      </button>
    </div>
    <small class="form-text text-muted">Enter the same password as before, for verification.</small>
  </div>
  
  <button type="submit" class="btn btn-primary">
    <i class="fas fa-user-plus me-2"></i> Register
  </button>
</form>
      
      <div class="auth-link">
        Already have an account? <a href="{% url 'login' %}">Login here</a>
      </div>
    </div>
  </div>

  <script>
    const toggleBtn = document.getElementById('theme-toggle');
    const themeIcon = document.getElementById('theme-icon');
    const body = document.body;

    // Load saved theme
    function loadTheme() {
      const savedTheme = localStorage.getItem('theme') || 'dark';
      if (savedTheme === 'dark') {
        body.classList.add('dark-theme');
        themeIcon.classList.replace('fa-moon', 'fa-sun');
      } else {
        body.classList.remove('dark-theme');
        themeIcon.classList.replace('fa-sun', 'fa-moon');
      }
    }

    // Toggle theme
    toggleBtn.addEventListener('click', () => {
      if (body.classList.contains('dark-theme')) {
        localStorage.setItem('theme', 'light');
        themeIcon.classList.replace('fa-sun', 'fa-moon');
      } else {
        localStorage.setItem('theme', 'dark');
        themeIcon.classList.replace('fa-moon', 'fa-sun');
      }
      body.classList.toggle('dark-theme');
    });

    // Toggle password visibility
    function togglePassword(button) {
      const input = button.parentElement.querySelector('input');
      const icon = button.querySelector('i');
      
      if (input.type === 'password') {
        input.type = 'text';
        icon.classList.replace('fa-eye', 'fa-eye-slash');
      } else {
        input.type = 'password';
        icon.classList.replace('fa-eye-slash', 'fa-eye');
      }
    }

    // Add focus/blur events for floating labels and underline animation
    document.querySelectorAll('.form-control').forEach(input => {
      const formGroup = input.closest('.form-group');
      
      input.addEventListener('focus', () => {
        formGroup.classList.add('focused');
        formGroup.classList.add('underline-animation');
      });
      
      input.addEventListener('blur', () => {
        if (!input.value) {
          formGroup.classList.remove('focused');
        }
      });
      
      // Initialize focused state if input has value
      if (input.value) {
        formGroup.classList.add('focused');
      }
    });

    // Initialize theme
    document.addEventListener('DOMContentLoaded', loadTheme);
  </script>
</body>
</html>